# Release

This repository uses [ðŸ¦‹ Changesets](https://github.com/changesets/changesets) to manage releases.

## Creating a release

To create a release, follow these steps:

1. Make changes to the codebase.
2. Run tests and ensure everything is working as expected.
3. Commit all your changes to the `feature` branch.
4. From the root of the project, execute the following command.

```bash
# Root of the project
pnpm changeset
```
> Note: Changeset identifies the changed packages comparing your `feature branch` to with the `master branch`. If these branches are not properly synced with remote, you'll some irrelevant packages listed under changed packages. It is recommended to rebase your `feature branch` and `master branch` with remote before executing `pnpm changeset`.

This will open a prompt to select the packages that have changed. Select the packages that have changed and press `Enter`.

![changesets-001](../assets/images/develop/release/changesets-changed-packages-001.png)

Then, it will open a prompt to select the type of change. Select the type of change and press `Enter`.

![changesets-002](../assets/images/develop/release/changesets-changed-packages-002.png)

Lastly, it will open a prompt to enter a summary of the changes. Enter a summary and press `Enter`. (Additionally, if you want to have an editor view to enter a long summary with line breaks, press `Enter` without typing anything.)

> **Note**
> Please enter a meaningful summary of the changes. This will be used in the changelog.

**Regular Summary Prompt**

![changesets-summary-001](../assets/images/develop/release/changesets-summary-001.png)

5. Then commit the generated changeset file with the following commit message.

```bash
Add changeset ðŸ¦‹
```

6. Push your changes and changeset commit to the remote repository.
7. Create a pull request for your changes and assign a reviewer.
8. After the pull request is reviewed and approved, merge it into the `master` branch.

## Merging the autogenerated version bump PR.

1. After you've merged your PR, Changesets will version the packages that have changed and create a PR with the version bump. You can find the PR in the [pull requests](https://github.com/wso2/identity-apps/pulls) tab.

ðŸ’¡ Sample PR title: `[Release] [GitHub Action] Update package versions.`

2. Approve and merge the PR.
    > **Warning**
    > Do not squash and merge.

![changesets-autogen-pr-1](../assets/images/develop/release/changesets-autogen-pr-001.png)

> **Note**
> A release build will run automatically after the version bump PR is merged. The changed apps and package artifacts will be released to GitHub and Nexus.